@autoHeader: 2.1.1.1.1.1


<p align="right">update time : {docsify-updated}</p>

## 基础篇

### Redis有哪些数据类型，使用场景？

Redis的基础数据类型包括5种，字符串String、字典Hash、列表List、集合Set、有序集合SortedSet。



## 机制篇

### Redis如何实现持久化？





## 应用篇

### 平时使用Redis遇到的问题，如何解决的？

项目中的用到的缓存是为了缓存数据的相关属性信息，比如数据id、路径等。

查询请求现在缓存中查询，缓存中没有再去查数据库，以减少数据库的压力。

需要注意的问题分为以下几点：

1、要注意缓存穿透，用一个不存在的数据id重复请求，由于缓存中没有，重复去查询查询数据库，对数据库造成压力。解决方案是发现请求数据不存在时，向缓存写入一个空值，设置短一点的有效期。

2、要注意缓存雪崩，当某一个时刻出现大规模的缓存失效的情况，那么就会导致大量的请求直接打在数据库上面，导致数据库压力巨大，因此需要在失效时间上加上一个随机值。

3、要注意缓存和数据库的一致性，由于业务读多写少的业务特点，采用旁路缓存模式，更新时先更新数据库再删除缓存，以保证最终一致性。

### 如何保证缓存和数据库的一致性？

在解决缓存一致性的过程中，有多种途径可以保证缓存的最终一致性，应该根据场景来设计合适的方案：

1、读多写少的场景下，可以选择采用“ Cache-Aside + 消费数据库日志补偿机制”的方案

2、写多的场景下，可以选择采用读穿透模式，在查询操作中更新缓存，查询数据时当缓存未命中时，由缓存层查询数据库，并将结果写入缓存中。

3、写多的极端场景下，可以选择直写模式，应用层更新数据时，由缓存更新数据库。



### Redis里面有1亿个key，其中有10w个key是以某个固定的已知的前缀开头的，如何将它们全部找出来？

最简单的方式可以使用keys指令可以扫出指定模式的key列表。

但由于Redis是单线程的，keys指令会导致线程阻塞一段时间，如果查询的Redis正在给线上业务提供服务，会导致线上服务停顿，直到keys命令执行完毕，服务才能恢复。

因此，如果是现实Redis，可以使用scan命令，scan指令可以无阻塞的提取出指定模式的key列表，但是会有一定的重复概率，需要再额外做一次去重就可以了，整体所花费的时间会比直接用keys指令长。

### Redis如何实现异步队列？



